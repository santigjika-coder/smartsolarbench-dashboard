<!DOCTYPE html>
<html>
<head>
    <title>Smart Bench Berat - Live</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/justgage/1.2.9/justgage.min.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; background: #f4f7f6; }
        .container { display: flex; flex-wrap: wrap; justify-content: center; }
        .gauge { width: 300px; height: 240px; margin: 10px; background: white; border-radius: 10px; }
    </style>
</head>
<body>
    <h1>Parku i Beratit - Live Stats</h1>
    <div class="container">
        <div id="temp_gauge" class="gauge"></div>
        <div id="hum_gauge" class="gauge"></div>
    </div>

    <script>
        // 1. Create the Gauges
        var tGauge = new JustGage({ id: "temp_gauge", value: 0, min: 0, max: 50, title: "Temperatura (Â°C)" });
        var hGauge = new JustGage({ id: "hum_gauge", value: 0, min: 0, max: 100, title: "Lageshtia (%)" });

        // 2. Function to fetch data from ThingSpeak
        function updateData() {
            fetch('https://api.thingspeak.com/channels/3255086/feeds.json?results=1')
            .then(response => response.json())
            .then(data => {
                const lastFeed = data.feeds[0];
                tGauge.refresh(lastFeed.field1); // Update Temp
                hGauge.refresh(lastFeed.field2); // Update Humidity
            });
        }

        // 3. Update every 15 seconds
        setInterval(updateData, 15000);
        updateData(); // Run once at start
    </script>
</body>
</html>
